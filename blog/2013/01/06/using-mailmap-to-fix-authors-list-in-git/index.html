<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Using mailmap to fix authors list in git</title>
  <meta name="description" content="I love doing git shortlog -sne to get number of commits by each author in a git repo ( don’t aske me why!)">
  
  <meta name="keywords" content=""/>
  
  <meta content="StackToHeap" property="og:site_name">

  <meta content="Using mailmap to fix authors list in git" property="og:title">


  <meta content="article" property="og:type">


  <meta content="<p>I love doing <code class="language-plaintext highlighter-rouge">git shortlog -sne</code> to get number of commits by each author in a git repo ( don’t aske me why!)</p>

" property="og:description">


  <meta content="https://stacktoheap.com/blog/2013/01/06/using-mailmap-to-fix-authors-list-in-git/" property="og:url">


  <meta content="2013-01-06T22:21:00+00:00" property="article:published_time">
  <meta content="https://stacktoheap.com/about/" property="article:author">


  <meta content="https://stacktoheap.com/images/logo-high-resolution.png" property="og:image">


  
  <meta content="git" property="article:section">
  


  


  <meta name="twitter:site" value="@manojlds">
<meta name="twitter:creator" value="@manojlds">
<meta name="twitter:card" value="summary_large_image">

<meta name="twitter:image" content="https://stacktoheap.com/images/logo-high-resolution.png">



  <meta name="theme-color" content="#641AE6">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="preload" href="/assets/css/syntax.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/css/syntax.css"></noscript>
  <link rel="canonical" href="https://stacktoheap.com/blog/2013/01/06/using-mailmap-to-fix-authors-list-in-git/">
  <link rel="alternate" type="application/rss+xml" title="StackToHeap" href="https://stacktoheap.com/feed.xml">
  <link rel="manifest" href="/manifest.json">
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-35693303-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>


  <body class="font-sans m-0">

    <div class="navbar bg-primary text-primary-content">
  <div class="flex-1">
    <a class="btn btn-ghost normal-case text-xl" href="/" >
      StackToHeap
    </a>
  </div>
  <div class="flex-none">
    <ul class="menu menu-horizontal px-1">
      
        
        <li><a href="/about/">About</a></li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      <li><a href="/feed.xml">RSS</a></li>
    </ul>
  </div>
</div>

    <div class="container mt-12 p-4">
        <article class="prose lg:prose-xl lg:leading-normal" itemscope itemtype="http://schema.org/BlogPosting">
  <h1 itemprop="name headline">Using mailmap to fix authors list in git</h1>
  <p class="post-meta"><time datetime="2013-01-06T22:21:00+00:00" itemprop="datePublished">Jan 6, 2013</time></p>
  <div class="post-content" itemprop="articleBody">
    <p>I love doing <code class="language-plaintext highlighter-rouge">git shortlog -sne</code> to get number of commits by each author in a git repo ( don’t aske me why!)</p>

<p>One problem with running it on git repos of long running projects is that authors may change their name or email or both during the course of the project due to many reasons ( most of the times, I have seen people realize few commits into the project that they were using a wrong / personal / professional email id or username. Other times, it is because, being complete newbies to git, they did not configure the username and email and the default ones generated by git were being used.)</p>

<p>When that happens, you can’t get proper counts from the git shortlog output. Here’s a sample output from a dummy repo with two commits. Both are by me, but with different names:</p>

<figure class="highlight"><pre><code class="language-powershell" data-lang="powershell"><span class="n">C:\projects\test.git</span><span class="w"> </span><span class="p">[</span><span class="n">master</span><span class="p">]</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">git</span><span class="w"> </span><span class="nx">shortlog</span><span class="w"> </span><span class="nt">-sne</span><span class="w">
     </span><span class="mi">1</span><span class="w">  </span><span class="n">Manoj</span><span class="w"> </span><span class="err">&lt;</span><span class="nx">manojlds</span><span class="err">@</span><span class="nx">gmail.com</span><span class="err">&gt;</span><span class="w">
     </span><span class="mi">1</span><span class="w">  </span><span class="n">Manojlds</span><span class="w"> </span><span class="err">&lt;</span><span class="nx">manojlds</span><span class="err">@</span><span class="nx">gmail.com</span><span class="err">&gt;</span></code></pre></figure>

<p>Eventhough I have made 2 commits (yay!), I have 1 commit assigned to each of my names.</p>

<p>How do I fix this and make the <code class="language-plaintext highlighter-rouge">git shortlog</code> output more meaningful?</p>

<p>This is where a <code class="language-plaintext highlighter-rouge">.mailmap</code> file comes into the picture. It contains the mapping from the “wrong” email ids and / or names to the right ones:</p>

<p><code class="language-plaintext highlighter-rouge">Proper Name &lt;proper@email.xx&gt; Commit Name &lt;commit@email.xx&gt;</code></p>

<p>The above maps the <code class="language-plaintext highlighter-rouge">Commit Name &lt;commit@email.xx&gt;</code> to the <code class="language-plaintext highlighter-rouge">Proper Name &lt;proper@email.xx&gt;</code> ( wasn’t that obvious? Yeah, but I had to make it explicit, weren’t I?) There are multiple forms for specifying the correct user name and email in a mailmap. Learn more about <code class="language-plaintext highlighter-rouge">git shortlog</code> and <code class="language-plaintext highlighter-rouge">.mailmap</code> at the <a href="http://www.kernel.org/pub/software/scm/git/docs/git-shortlog.html">manpage for shortlog</a></p>

<p>You can just specify the correct name for the email address in the below form:</p>

<p><code class="language-plaintext highlighter-rouge">Proper Name &lt;commit@email.xx&gt;</code></p>

<p>This is what I need ,as both my commits have the correct email address, but use different user names, and I want to specify the canonical user name. To fix the authors list in my dummy repo and make sure that the 1 commit is also attributed correctly to me, I can write a <code class="language-plaintext highlighter-rouge">.mailmap</code> file with the following contents:</p>

<p><code class="language-plaintext highlighter-rouge">Manoj &lt;manojlds@gmail.com&gt;</code></p>

<p>You can place the file with that name at the root of your repo and the run <code class="language-plaintext highlighter-rouge">git shortlog -sne</code> to see that authors list is like we want. You can also set the config <code class="language-plaintext highlighter-rouge">mailmap.file</code> with the path to the mailmap file and git will pick up the file from that location if the <code class="language-plaintext highlighter-rouge">.mailmap</code> is not found at the root of the repo. You can use this when you don’t want mailmap to be part of your repo.</p>


  </div>
  
    <div class="divider">Comments</div>
    <section>
      <div id="disqus_thread" aria-live="polite">
<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
      this.page.url = 'https://stacktoheap.com/blog/2013/01/06/using-mailmap-to-fix-authors-list-in-git/';
      this.page.identifier = 'https://stacktoheap.com/blog/2013/01/06/using-mailmap-to-fix-authors-list-in-git/';
    };
    
    (function() {
    var d = document, s = d.createElement('script');
    s.src = 'https://stacktoheap.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
    </section>
  
</article>

    </div>

    <footer class="footer footer-center p-10 bg-base-200 text-base-content rounded">
  <div class="grid grid-flow-col gap-4">
  </div> 
  <div>
    <div class="grid grid-flow-col gap-4">
      <a href="https://github.com/manojlds"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="fill-current"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path></svg></a> 
      <a href="https://github.com/manojlds"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="inline-block h-5 w-5 fill-current md:h-6 md:w-6"><path d="M256,32C132.3,32,32,134.9,32,261.7c0,101.5,64.2,187.5,153.2,217.9a17.56,17.56,0,0,0,3.8.4c8.3,0,11.5-6.1,11.5-11.4,0-5.5-.2-19.9-.3-39.1a102.4,102.4,0,0,1-22.6,2.7c-43.1,0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1,1.4-14.1h.1c22.5,2,34.3,23.8,34.3,23.8,11.2,19.6,26.2,25.1,39.6,25.1a63,63,0,0,0,25.6-6c2-14.8,7.8-24.9,14.2-30.7-49.7-5.8-102-25.5-102-113.5,0-25.1,8.7-45.6,23-61.6-2.3-5.8-10-29.2,2.2-60.8a18.64,18.64,0,0,1,5-.5c8.1,0,26.4,3.1,56.6,24.1a208.21,208.21,0,0,1,112.2,0c30.2-21,48.5-24.1,56.6-24.1a18.64,18.64,0,0,1,5,.5c12.2,31.6,4.5,55,2.2,60.8,14.3,16.1,23,36.6,23,61.6,0,88.2-52.4,107.6-102.3,113.3,8,7.1,15.2,21.1,15.2,42.5,0,30.7-.3,55.5-.3,63,0,5.4,3.1,11.5,11.4,11.5a19.35,19.35,0,0,0,4-.4C415.9,449.2,480,363.1,480,261.7,480,134.9,379.7,32,256,32Z"></path></svg></a> 
    </div>
  </div> 
  <div>
    <p>Copyright © 2023 - StackToHeap</p>
  </div>
</footer>

    <script type="text/javascript">
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js').then(function(registration) {
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}
</script>

  </body>

</html>
